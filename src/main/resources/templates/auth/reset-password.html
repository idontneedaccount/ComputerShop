<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Đặt lại mật khẩu - Computer Shop</title>
    <link rel="stylesheet" href="/assets/css/vendor/bootstrap.min.css" th:href="@{/assets/css/vendor/bootstrap.min.css}"/>
    <link rel="stylesheet" href="/assets/css/style.min.css" th:href="@{/assets/css/style.min.css}"/>
    <link rel="stylesheet" href="/assets/css/login-custom.css" th:href="@{/assets/css/login-custom.css}"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
<div class="axil-login-area">
    <div class="form-container">
        <h3>Đặt lại mật khẩu</h3>

        <div th:if="${error}" class="alert error" role="alert">
            <span class="alert-message" th:text="${error}"></span>
        </div>
        <div th:if="${message}" class="alert success" role="alert">
            <span class="alert-message" th:text="${message}"></span>
        </div>

        <form th:action="@{/auth/reset-password}" method="post" style="width:100%">
            <input type="hidden" name="email" th:value="${email}">
            <input type="hidden" name="token" th:value="${token}">
            
            <div class="input-group password-group">
                <span class="input-icon"><i class="fas fa-lock"></i></span>
                <label for="password" class="visually-hidden">Mật khẩu mới</label>
                <input id="password" name="password" type="password" class="form-control" placeholder="Mật khẩu mới" required>
                <span class="toggle-password-eye" onclick="togglePassword()">
                    <i id="eyeIcon" class="fa fa-eye"></i>
                </span>
            </div>
            
            <div class="input-group password-group mt-3">
                <span class="input-icon"><i class="fas fa-lock"></i></span>
                <label for="passwordConfirm" class="visually-hidden">Xác nhận mật khẩu</label>
                <input id="passwordConfirm" name="passwordConfirm" type="password" class="form-control" placeholder="Xác nhận mật khẩu" required>
                <span class="toggle-password-eye" onclick="toggleConfirmPassword()">
                    <i id="eyeIconConfirm" class="fa fa-eye"></i>
                </span>
            </div>

            <div class="d-grid gap-2 mt-3">
                <button type="submit" class="btn btn-primary w-100">Đặt lại mật khẩu</button>
            </div>
            <div class="mt-3">
                <p><a th:href="@{/auth/login}">Quay lại trang đăng nhập</a></p>
            </div>
        </form>
    </div>
</div>
<script>
    function togglePassword() {
        const pwd = document.getElementById("password");
        const eye = document.getElementById("eyeIcon");
        if (pwd.type === "password") {
            pwd.type = "text";
            eye.classList.remove("fa-eye");
            eye.classList.add("fa-eye-slash");
        } else {
            pwd.type = "password";
            eye.classList.remove("fa-eye-slash");
            eye.classList.add("fa-eye");
        }
    }

    function toggleConfirmPassword() {
        const pwd = document.getElementById("passwordConfirm");
        const eye = document.getElementById("eyeIconConfirm");
        if (pwd.type === "password") {
            pwd.type = "text";
            eye.classList.remove("fa-eye");
            eye.classList.add("fa-eye-slash");
        } else {
            pwd.type = "password";
            eye.classList.remove("fa-eye-slash");
            eye.classList.add("fa-eye");
        }
    }
</script>
</body>
</html> 