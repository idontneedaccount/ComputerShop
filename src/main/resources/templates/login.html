<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
	<meta charset="UTF-8">
	<title>Login - Computer Shop</title>
	<style>
        .error {
            color: red;
            font-size: 0.8em;
        }
        .form-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }
        table {
            width: 100%;
        }
        td {
            padding: 5px;
        }
	</style>
</head>
<body>
	<div class="form-container">
		<h2>Login to Your Account</h2>
		<div th:if="${error}" class="error" role="alert">
			<p th:text="${error}"></p>
		</div>
		<div th:if="${param.verified}" class="success" role="alert" style="color: green; font-size: 0.9em;">
			<p>Your account has been successfully verified. You can now login.</p>
		</div>
		<div th:if="${param.resent}" class="success" role="alert" style="color: green; font-size: 0.9em;">
			<p>Verification email resent successfully. Please check your email.</p>
		</div>

		<form th:action="@{/auth/login}" method="post" th:object="${user}">
			<table th:role="login-form">
				<tr>
					<td><label for="username">Username:</label></td>
					<td><input type="text" id="username" th:field="*{username}"/></td>
				</tr>
				<tr>
					<td><label for="password">Password:</label></td>
					<td>
						<input type="password" id="password" th:field="*{password}"/>
						<br/>
						<input type="checkbox" id="showPassword" onclick="pwd.type = this.checked ? 'text' : 'password';">
						<label for="showPassword">Show me password</label>
					</td>
				</tr>
				<tr>
					<td colspan="2" style="text-align: end;">
						<button type="submit">Login</button>
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<p>Don't have an account? <a th:href="@{/auth/register}">Register here</a></p>
						<p>Haven't received verification email? <a th:href="@{/auth/resend-verification}">Resend verification</a></p>
					</td>
				</tr>
			</table>
		</form>
	</div>

	<script>
        function togglePassword() {
            var pwd = document.getElementById('password');
            pwd.type = pwd.type === 'password' ? 'text' : 'password';
        }
	</script>
</body>
</html>
